<div class="car_wash_fee">
    <div class="row main_storage_car">
        <div class="col s10">
            <div class="col s2" style="padding: 0;margin: 0;">
                <div class="col s6 input-field">
                    <input id="instruction_number" type="text" ng-model="instructionNum">
                    <label for="instruction_number">洗车编号</label>
                </div>
                <div class="col s6 input-field">
                    <input id="dp_number" type="text" ng-model="dp_number">
                    <label for="dp_number">调度编号</label>
                </div>
            </div>


            <div class="col s2 input-field">
                <select material-select watch ng-model="receive_status" style="width:100%">
                    <option value="" selected>领取状态</option>
                    <option value="0">未通过</option>
                    <option value="1">未领取</option>
                    <option value="2">已领取</option>
                </select>
            </div>
            <div class="col s2 input-field">
                <input id="load_time_start" type="text" class="datepicker" ng-model="loadDateStart" date style="width:100%"><i
                    class="mdi dataIcon mdi-table-large"></i>
                <label for="load_time_start">装车时间</label>
            </div>
            <div class="col s2 input-field">
                <input id="load_time_end" type="text" class="datepicker" ng-model="loadDateEnd" date style="width:100%"><i
                    class="mdi dataIcon mdi-table-large"></i>
                <label for="load_time_end">至</label>
            </div>



            <div class="col input-field s2">
                <input id="receive_time_start" type="text" class="datepicker" ng-model="receiveTimeStart" date style="width:100%"><i
                    class="mdi dataIcon mdi-table-large"></i>
                <label for="receive_time_start">发放时间</label>
            </div>
            <div class="col input-field s2">
                <input id="receive_time_end" type="text" class="datepicker" ng-model="receiveTimeEnd" date style="width:100%"><i
                    class="mdi dataIcon mdi-table-large"></i>
                <label for="receive_time_end">至</label>
            </div>



            <div class="col s2 input-field">
                <select material-select watch ng-model="driver" id="getDrivderId" style="width: 100%" >
                    <option value="" selected>司机</option>
                    <option ng-repeat="el in driveNameList" ng-value="el.id">{{el.drive_name}}</option>
                </select>
            </div>
            <div class="col s2 input-field">
                <select  material-select watch ng-model="truckNum"  id="truckNum" style="width: 100%"  ng-change="changeTruck(addTruckId)">
                    <option value="" selected disabled>请选择</option>
                    <option ng-repeat="truckNumItem in truckNumListAllList" ng-value="truckNumItem.id">{{truckNumItem.truck_num}}({{truckNumItem.truck_type == 1 ? "头车" : "挂车"}})</option>
                </select>
            </div>
            <div class="col s4 input-field">
                <div class="col s6">
                    <select id="end_city" name="state" style="width:100%" ng-change="getRecive()" ng-model="cityId">
                        <option value=""></option>
                        <option value="0" >清除选择</option>
                        <option ng-repeat="city in cityList" ng-value="city.id">{{city.city_name}}</option>
                    </select>
                </div>
                <div class="col s6">
                    <select material-select watch ng-model="distributor" style="width:100%">
                        <option value="" selected>经销商</option>
                        <option ng-repeat="rec in receiveList" ng-value="rec.id">{{rec.short_name}}</option>
                    </select>
                </div>
            </div>


            <div class="input-field col s2">
                <select id="truck_type" name="truck_type" ng-change="getCompany()" material-select watch ng-model="operateType">
                    <option ng-value="">请选择</option>
                    <option ng-value="1">自营</option>
                    <option ng-value="2">外协</option>
                </select>
                <label for="truck_type">所属类型</label>
            </div>
            <div class="input-field col s2">
                <select id="truck_company" name="truck_company" material-select watch ng-model="companyId" required>
                    <option value="">请选择</option>
                    <option ng-repeat="el in companyList" ng-value="el.id">{{el.company_name}}</option>
                </select>
                <label for="truck_company">所属公司</label>
            </div>

        </div>
        <div class="col s2 vc-center" style="height: 125px;">
            <div class="col s6 center-align">
                <a class="btn-floating btn-large waves-light waves-effect red lighten-2 btn vc-center"
                   ng-click="getCarWashFeeList()">
                    <i class="mdi mdi-magnify"></i>
                </a>
            </div>
            <div class="col s6 center-align">
                <a class="btn-floating btn-large waves-light waves-effect btn vc-center" style="background-color: #fea353" ng-click="export()">
                    <i class="mdi mdi-cloud-download"></i>
                </a>
            </div>
        </div>

        <div class="row col s12" style="margin-top: 25px">
            <div class="col s12 cyan white-text vc-center fz18" style="height: 60px;border-bottom: 1px solid  #4e84cb;border-top:1px solid  #fff" ng-if="carWashFeeList.length!==0">
                <div class="col left-align bold" style="width: 20%">
                    总洗车金额:{{boxArrayFee.total_clean_fee}}元
                </div>
                <div class="col center-align bold" style="width: 20%">
                    总拖车金额:{{boxArrayFee.total_trailer_fee}}元
                </div>
                <div class="col center-align bold" style="width: 20%">
                    总提车金额:{{boxArrayFee.car_parking_fee}}元
                </div>
                <div class="col center-align bold" style="width: 20%">
                    总地跑金额:{{boxArrayFee.total_run_fee}}元
                </div>
                <div class="col right-align bold" style="width: 20%">
                    总带路金额:{{boxArrayFee.lead_fee}}元
                </div>
            </div>


            <div class="col s12 cyan white-text vc-center fz18" style="height: 60px;border-bottom: 1px solid  #4e84cb;border-top:1px solid  #fff" ng-if="selectedIdsArr.length!==0">
                <div class="col left-align bold" style="width: 20%">
                    总洗车金额:{{checkedWash}}元
                </div>
                <div class="col center-align bold" style="width: 20%">
                    总拖车金额:{{checkedTotalTrailerFee}}元
                </div>
                <div class="col center-align bold" style="width: 20%">
                    总提车金额:{{checkedCarParkingFee}}元
                </div>
                <div class="col center-align bold" style="width: 20%">
                    总地跑金额:{{checkedTotalRunFee}}元
                </div>
                <div class="col right-align bold" style="width: 20%">
                    总带路金额:{{checkedLeadFee}}元
                </div>
            </div>

            <div class="divider cyan" style="height: 2px;"></div>
            <table class="bordered striped text_mid">
                <thead class="blue-grey lighten-5">
                <tr class="grey-text text-darken-2">
                    <th data-field="" ng-show="carWashFeeList[0].status==1" >
                        <input type="checkbox" ng-click="selectAllCheckBox($event)" id="selectAll" name="selectAll" class="filled-in" />
                        <label for="selectAll" style="color: black">全选</label>
                    </th>
                    <th data-field="">编号</th>
                    <th data-field="">调度编号</th>
                    <th data-field="">司机</th>
                    <th data-field="">电话</th>
                    <th data-field="">品牌</th>
                    <th data-field="">装车数</th>
                    <th data-field="">洗车费</th>
                    <th data-field="">应发洗车费</th>
                    <th data-field="">拖车费</th>
                    <th data-field="">提车费</th>
                    <th data-field="">地跑费</th>
                    <th data-field="">带路费</th>
                    <th data-field="">货车牌号</th>
                    <th data-field="">补发</th>
                    <th data-field="">经销商</th>
                    <th data-field="">装车日期</th>
                    <th data-field="">银行账号</th>
                    <th data-field="">户名</th>
                    <th data-field="">开户行</th>
                    <th data-field="">领取状态</th>
                    <th data-field="">月结</th>
                    <th data-field="" ng-show="carWashFeeList[0].status==1">
                        <button ng-click="batchDeal()" style="padding:0;width:50px;height: 35px;line-height: 35px" class="btn waves-light waves-effect lighten-1 fz15" type="button">
                            批量
                        </button>
                    </th>
                    <th  ng-show="carWashFeeList[0].status!==1">操作</th>
                </tr>
                </thead>
                <tbody>
                <tr class="grey-text text-darken-1" ng-repeat="car in carWashFeeList">
                    <td ng-show="car.status==1">
                         <span class="switch"  >
                              <input ng-click="checkIsAllSel();checkSelMission($event,car,$index)" type="checkbox" id="{{car.id}}" name="select" class="filled-in"/>
                              <label for="{{car.id}}" style="margin-top: 9px"></label>
                        </span>
                    </td>
                    <td>{{car.id}}</td>
                    <td>{{car.dp_route_task_id}}</td>
                    <td>{{car.drive_name}}</td>
                    <td>{{car.mobile}}</td>
                    <td>{{car.make_name}}</td>
                    <td>{{car.car_count}}</td>
                    <td>{{car.total_price}}</td>
                    <td>{{car.actual_price}}</td>
                    <td>{{car.total_trailer_fee}}</td>
                    <td>{{car.car_parking_fee}}</td>
                    <td>{{car.total_run_fee}}</td>
                    <td>{{car.lead_fee}}</td>
                    <td>{{car.truck_num}}</td>
                    <td>{{car.type==0?'否':'是'}}</td>
                    <td>{{car.short_name}}</td>
                    <td>{{car.created_on | date:'yyyy-MM-dd'}}</td>
                    <td>{{car.bank_number}}</td>
                    <td>{{car.bank_name}}</td>
                    <td>{{car.bank_user_name}}</td>
                    <td>{{car.status==0?'未通过':car.status==1?'未领取':'已领取'}}</td>
                    <td>{{car.month_flag==1?'是':'否'}}</td>
                    <td class="details">
                        <a ng-show="car.status == 1" ng-click="carNotHave(car.id)" style="font-size: 1.5rem;cursor: pointer">
                            <i class="mdi mdi-window-close look_icon red-text lighten-1"></i>
                        </a>
                        <a ng-show="car.status == 1" ng-click="carHave(car.id)" style="font-size: 1.5rem;cursor: pointer">
                            <i class="mdi  mdi-check look_icon cyan-text lighten-1"></i>
                        </a>

                        <a  style="font-size: 1.5rem" ng-click="openDetail(car.id)">
                            <i class="mdi mdi-file-document look_icon cyan-text lighten-1"></i>
                        </a>
                    </td>
                </tr>
                <tr class="grey-text text-darken-1" ng-if="carWashFeeList.length == 0">
                    <td colspan="22" ng-show="car.status==1"><span style="letter-spacing: 2px">暂无数据</span></td>
                    <td colspan="21" ng-show="car.status!==1"><span style="letter-spacing: 2px">暂无数据</span></td>
                </tr>
                </tbody>
            </table>
        </div>

        <div class="paging_box col s12" style="height: 45px">
            <div class="right">
                <a class="waves-light waves-effect cyan lighten-1 btn" id="pre" ng-click="previous_page()">
                    上一页
                </a>
                <a class="waves-light waves-effect cyan lighten-1 btn" id="next" ng-click="next_page()">
                    下一页
                </a>
            </div>
        </div>
    </div>
</div>

<div id="openDetailModal" class="modal">
    <div class="modal-content">
        <h4 class="center-align">费用详情</h4>
        <div class="divider"></div>
            <div class="container" style="padding: 20px 0 0">
                <div class="row col s12  left-align bold">费用总价</div>
                <div class="row col s12 cyan-text">
                <!--大车洗车费  小车洗车费  拖车费 提车费   地跑费  带路费  -->

                    <div class="col input-field" style="width: 20%">大车洗车费:<span class="red-text fz22">{{bigWashFee}}</span></div>
                    <div class="col input-field" style="width: 20%">小车洗车费:<span class="red-text fz22">{{smallWashFee}}</span></div>
                    <div class="col input-field" style="width: 20%">拖车费:<span class="red-text fz22">{{showList.total_trailer_fee}}</span></div>
                    <div class="col input-field" style="width: 20%">地跑费:<span class="red-text fz22">{{showList.total_run_fee}}</span></div>
                    <div class="col input-field" style="width: 20%">带路费:<span class="red-text fz22">{{showList.lead_fee}}</span></div>

            </div>
                <div class="row col s12  left-align bold">费用单价</div>
                <div class="row col s12 cyan-text fz13">
                    <div class="col input-field" style="width: 20%">大车洗车费单价:<span class="red-text fz22">{{showList.big_single_price}}</span></div>
                    <div class="col input-field" style="width: 20%">小车洗车费单价:<span class="red-text fz22">{{showList.small_single_price}}</span></div>
                    <div class="col input-field" style="width: 20%">拖车费单价:<span class="red-text fz22">{{showList.trailer_fee}}</span></div>
                    <div class="col input-field" style="width: 20%">地跑费单价:<span class="red-text fz22">{{showList.run_fee}}</span></div>
                    <div class="col input-field" style="width: 20%">带路费单价:<span class="red-text fz22">{{showList.lead_fee}}</span></div>

                </div>
                <div class="col s12 input-field left-align">
                    备注:{{showList.remark}}
                </div>
            </div>
    </div>
    <div class="divider"></div>
    <div class="modal-footer row">
        <div class="col s12 center-align" style="margin-top: 15px">
            <div class="col s2 offset-s5">
                <a style="width: 100%" class="modal-action modal-close waves-light waves-effect cyan lighten-1 btn">
                    关闭
                </a>
            </div>
        </div>
    </div>
</div>


<div id="openBatchDeal" class="modal">
    <div class="modal-content  center" style="font-weight: 500;padding: 0">
        <div class="row col s12 vc-center cyan fz20" style="color: white;letter-spacing:1px;font-weight: bold;height:70px;">
            <p>批量详情</p>
        </div>
        <div class="container" style="padding: 20px 0 0">
            <div class="row col s12  left-align bold">批量费用总价</div>
            <div class="row col s12 cyan-text">
                <!--总洗车费金额  总拖车费金额  总提车费金额 总提车费金额   总带路费金额 -->
                <div class="col input-field" style="width: 20%">总洗车费:<span class="red-text fz22">{{checkedWash}}</span></div>
                <div class="col input-field" style="width: 20%">总拖车费:<span class="red-text fz22">{{checkedTotalTrailerFee}}</span></div>
                <div class="col input-field" style="width: 20%">总提车费:<span class="red-text fz22">{{checkedCarParkingFee}}</span></div>
                <div class="col input-field" style="width: 20%">总地跑费:<span class="red-text fz22">{{checkedTotalRunFee}}</span></div>
                <div class="col input-field" style="width: 20%">总带路费:<span class="red-text fz22">{{checkedLeadFee}}</span></div>

            </div>
        </div>
    </div>
    <div class="divider"></div>
    <div class="modal-footer row">
        <div class="col s12 center-align" style="margin-top: 15px">
            <div class="col s2 offset-s4">
                <a style="width: 100%" class="modal-action modal-close waves-light waves-effect grey lighten-1 btn">
                    关闭
                </a>
            </div>
            <div class="col s2">
                <a ng-click="createList()" style="width: 100%" class="waves-light waves-effect cyan lighten-1 btn">
                    确定
                </a>
            </div>
        </div>
    </div>
</div>


