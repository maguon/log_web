<div class="instruction_operation">

    <div class="row col s12">
        <div class="row col s11">
            <div class="input-field col s4">
                <input id="truck" type="text" ng-model="truckNum">
                <label for="truck">货车</label>
            </div>
            <div class="input-field col s4">
                <input id="driver" type="text" ng-model="driveName">
                <label for="driver">司机</label>
            </div>
            <div class="input-field col s4">
                <select material-select watch ng-model="currentStatus">
                    <option value="" selected>当前状态</option>
                    <option value="1">待运中</option>
                    <option value="2">在途</option>
                </select>
            </div>
        </div>
        <div class="row col s1 center">
            <a class="btn-floating btn-large waves-light waves-effect red lighten-2  btn vc-center"
               style="margin-right: 10px" ng-click="getTruckDispatch()">
                <i class="mdi mdi-magnify"></i>
            </a>
        </div>
        <div class="row col s12">
            <div class="input-field col s3">
                <select material-select watch ng-change="getLocateAddress()" ng-model="startCityId">
                    <option value="" selected>始发城市</option>
                    <option ng-repeat="city in cityList" ng-value="city.id">{{city.city_name}}</option>
                </select>
            </div>
            <div class="input-field col s3">
                <select material-select watch ng-model="locateAddrId">
                    <option value="" selected>装车地点</option>
                    <option ng-repeat="locateAddr in locateList" ng-value="locateAddr.id">{{locateAddr.addr_name}}</option>
                </select>
            </div>
            <div class="input-field col s3">
                <select material-select watch ng-change="getDistributor()" ng-model="endCityId">
                    <option value="" selected>目的城市</option>
                    <option ng-repeat="city in cityList" ng-value="city.id">{{city.city_name}}</option>
                </select>
            </div>
            <div class="input-field col s3">
                <select material-select watch ng-model="distributorId">
                    <option value="" selected>经销商</option>
                    <option ng-repeat="distributor in distributorList" ng-value="distributor.id">{{distributor.short_name}}</option>
                </select>
            </div>
        </div>
        <div class="col s12" style="margin-top: 15px">
            <div class="divider" style="background: #00bcd4;height: 2px;"></div>
            <table class=" bordered striped text_mid">
                <thead class="blue-grey lighten-5">
                <tr class="grey-text text-darken-2">
                    <th width="280">货车</th>
                    <th>司机</th>
                    <th>状态</th>
                    <th>当前城市或路线</th>
                    <th>当前载货量</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="dispatchInfo in dispatchList" class="grey-text text-darken-1">
                    <td>{{dispatchInfo.truck_num}}</td>
                    <td>{{dispatchInfo.drive_name}}</td>
                    <td>{{dispatchInfo.operate_status}}</td>
                    <td ng-if="!dispatchInfo.current_city == 0">{{dispatchInfo.city_name}}</td>
                    <td ng-if="dispatchInfo.current_city == 0">
                        <p style="margin: 0">{{dispatchInfo.task_start_name}}
                            &emsp;<span class="mdi mdi-arrow-right"></span>&emsp;
                            {{dispatchInfo.task_end_name}}
                        </p>
                    </td>
                    <td>{{dispatchInfo.car_count}}</td>
                    <td class="details">
                        <a ui-sref="instruction_operation_details({truckId:dispatchInfo.truck_id})" class="">
                            <i class="mdi mdi-eye look_icon cyan-text lighten-1"></i>
                        </a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>