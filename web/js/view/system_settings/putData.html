<!--修改结算-->
<div id="putSettle" class="modal">
    <div class="cyan lighten-1 white-text center-align modal_title" >修改结算</div>
    <div class="modal-content">
        <div class="row col" style="width: 80%;">
            <!--里程   运载车辆数   载重类型-->
            <div class="col s12" style="height: 70px">
                <div class="col s3 input-field">
                    <input type="number" name="settleDistance" id="settleDistance" ng-model="putSettleItem.distance" >
                    <label for="settleDistance"><span style="color: red">* </span>里程</label>
                </div>

                <div class="col s3 input-field">
                    <input type="text" name="settleCarCount" id="settleCarCount" ng-model="putSettleItem.car_count" >
                    <label for="settleCarCount"><span style="color: red">* </span>运载车辆数</label>
                </div>

                <div class="col s3 input-field">
                    <select id="car_status" name="car_status" material-select watch ng-model="putSettleItem.load_flag" style="width: 100%">
                        <option ng-value="1">重载</option>
                        <option ng-value="0">空载</option>
                    </select>
                    <label for="car_status"><span style="color: red">* </span>载重类型</label>
                </div>
                <div class="col s3 input-field" ng-show="putSettleItem.reverse_flag!==1">
                    <input type="text" name="loadFlag" id="loadFlag" ng-model="putSettleItem.reverse_money" disabled>
                    <label for="loadFlag"><span style="color: red">* </span>倒板金额</label>
                </div>
                <div class="col s3 input-field" ng-show="putSettleItem.reverse_flag==1">
                    <input type="text" name="loadFlag" id="loadFlag1" ng-model="putSettleItem.reverse_money" >
                    <label for="loadFlag1"><span style="color: red">* </span>倒板金额</label>
                </div>


            </div>
        </div>
    </div>

    <div class="divider" style="background: #ccc;height: 1px;"></div>
    <div class="modal-footer vc-center">
        <a class=" modal-action modal-close waves-effect waves-light grey lighten-1 btn"  >取消 </a>
        <button class="btn waves-light waves-effect cyan lighten-2"  ng-click="putSettleData()" name="action" style="margin-left: 10px">确定</button>
    </div>
</div>


<!--修改油耗-->
<div id="putOil" class="modal">
    <div class="cyan lighten-1 white-text center-align modal_title" >修改油耗</div>
    <div class="modal-content">
        <div class="row col" style="width: 80%;">
            <!--里程    载重类型-->
            <div class="col s12" style="height: 70px">

                <div class="col s6 input-field">
                    <input type="number" name="oilDistance" id="oilDistance" ng-model="putOilItem.oil_distance" >
                    <label for="oilDistance"><span style="color: red">* </span>油耗里程</label>
                </div>

                <div class="col s6 input-field">
                    <select id="oil_load_flag" name="oil_load_flag" material-select watch ng-model="putOilItem.oil_load_flag" style="width: 100%">
                        <option ng-value="1">重载</option>
                        <option ng-value="0">空载</option>
                    </select>
                    <label for="oil_load_flag"><span style="color: red">* </span>载重类型</label>
                </div>

            </div>
        </div>
    </div>

    <div class="divider" style="background: #ccc;height: 1px;"></div>
    <div class="modal-footer vc-center">
        <a class=" modal-action modal-close waves-effect waves-light grey lighten-1 btn"  >取消 </a>
        <button class="btn waves-light waves-effect cyan lighten-2"  ng-click="putOilData()" name="action" style="margin-left: 10px">确定</button>
    </div>
</div>




<div id="putData" >
    <div class="modal-content grey-text text-darken-2">
        <div class="row no-marBottom" ul-tabs style="overflow: hidden">
            <div class="col s12">
                <ul class="tabWrap grey lighten-4">
                    <li class="tab col s12 putTask vc-center" ng-click="putTask()">任务修改</li>
                   <!-- <li class="tab col s4 cash_repair vc-center" ng-click="cash_repair()">现金维修</li>
                    <li class="tab col s4 cash_etc vc-center" ng-click="cash_etc()">现金ETC</li>-->
                </ul>
            </div>
            <div id="putTask" class="row tab_box" style="margin-top: 50px">

                <!--查询条件-->
                <div class="row col s12">

                    <!--调度编号 调度状态 计划执行时间 司机 货车 起始城市 目的城市-->
                    <div class="col s10">

                        <!--调度编号-->
                        <div class="col s12 input-field">
                            <input  id="dispatchId" name="dispatchId" ng-model="dispatchId" type="text"   required >
                            <label for="dispatchId">调度编号</label>
                        </div>


                    </div>

                    <!--查询按钮-->
                    <div class="col s2" style="margin-top:15px;">
                        <div class="col s12 center">
                            <a ng-click="getOrderInfo()" class="btn-floating btn-large waves-light waves-effect red lighten-2 btn vc-center" style="margin-right: 10px">
                                <i class="mdi mdi-magnify"></i>
                            </a>
                        </div>
                    </div>




                </div>


                <!-- 下部分：检索结果显示区域 -->
                <div class="row col s12" >
                    <div class="divider cyan" style="height: 2px;"></div>
                    <table class=" bordered striped centered">
                        <thead class="blue-grey lighten-5">
                        <tr class="grey-text text-darken-2">
                            <th data-field="">调度编号</th>
                            <th data-field="">路线</th>
                            <th data-field="">里程(km)</th>
                            <th data-field="">油耗里程(km)</th>
                            <th data-field="">修改</th>
                            <th data-field="">司机</th>
                            <th data-field="">货车</th>
                            <th data-field="">计划装车数</th>
                            <th data-field="">实际装车数</th>
                            <th data-field="">运载车辆数</th>
                            <th data-field="">计划执行时间</th>
                            <th data-field="">完成时间</th>
                            <th data-field="">调度</th>
                            <th data-field="">状态</th>
                            <th data-field="">倒板</th>
                            <th>操作</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="el in dispatchOrderArray" class="grey-text text-darken-1">
                            <td ng-bind="el.id"></td>
                            <td>{{el.city_route_start}}-{{el.city_route_end}}</td>
                            <td ng-bind="el.distance"></td>
                            <td ng-bind="el.oil_distance"></td>
                            <td ng-bind="el.up_distance_count"></td>
                            <td ng-bind="el.drive_name"></td>
                            <td ng-bind="el.truck_num"></td>
                            <td ng-bind="el.plan_count"></td>
                            <td ng-bind="el.real_count"></td>
                            <td ng-bind="el.car_count"></td>
                            <td ng-bind="el.task_plan_date |date:'yyyy-MM-dd'"></td>
                            <td ng-bind="el.task_end_date |date:'yyyy-MM-dd hh:mm'"></td>
                            <td>{{el.route_op_name }}</td>
                            <td>{{el.task_status | instructionsStatus}}</td>
                            <td ng-if="el.reverse_flag==0">否</td>
                            <td ng-if="el.reverse_flag==1">是</td>
                            <!-- 显示画面按钮 -->
                            <td class="operation">
                                  <a ng-click="putSettle(el)" class="cyan-text fz12" style="margin-right: 10px;cursor: pointer;text-align: center">
                                      <i class="mdi mdi-cash-usd cyan-text lighten-1" style="margin: 0"></i>
                                  </a>
                                  <a ng-click="putOil(el)" class="cyan-text fz12" style="margin-right: 10px;cursor: pointer;text-align: center">
                                      <i class="mdi mdi-water-pump cyan-text lighten-1" style="margin: 0"></i>
                                  </a>
                                <a  ui-sref="dispatch_order_details({id:el.id,from:'putData'})" class=""><i class="mdi mdi-file-outline look_icon cyan-text lighten-1  " ></i></a>
                            </td>
                        </tr>

                        <tr ng-if="dispatchOrderArray.length==0">
                            <td colspan="16">暂无数据</td>
                        </tr>
                        <!-- <tr ng-if="(endTime==undefined||starTime==undefined)&&dispatchOrderArray.length==0">
                             <td colspan="15"><i class="mdi  mdi-alert-circle-outline red-text fz30"></i>&nbsp;&nbsp;&nbsp;指令时间为必填项</td>
                         </tr>-->
                        </tbody>
                    </table>
                </div>


                <!-- 上下页按钮 -->
                <div class="paging_box col s12">
                    <div class="right">
                        <a class="waves-light waves-effect cyan lighten-1 btn  "  id="pre"   ng-click="preBtn()">
                            上一页
                        </a>
                        <a class="waves-light waves-effect cyan lighten-1 btn " id="next"  ng-click="nextBtn()">
                            下一页
                        </a>
                    </div>
                </div>

            </div>

         <!--   <div id="cash_repair" class="col s12 tab_box" >
                <div class="col s10" style="margin-bottom: 20px">

                    <div class="col s12">
                        &lt;!&ndash; <div class="col s3 input-field">
                             <input id="repairNumber" ng-model="repairNumber" type="text">
                             <label for="repairNumber">编号</label>
                         </div>&ndash;&gt;
                        <div class="col s3 input-field">
                            <input type="text" name="truck_name" id="repair_num" ng-model="repairNum">
                            <label for="repair_num">维修编号</label>
                        </div>
                        <div class="col s3 input-field">
                            <select  material-select watch ng-model="repairTruck" id="repairTruck"  style="width: 100%">
                                <option value="" selected>请选择</option>
                                <option ng-repeat="truck in truckList" ng-value="truck.id">{{truck.truck_num}}</option>
                            </select>
                        </div>
                        <div class="col s6 input-field">
                            <select material-select watch id="repairPaymentStatus" ng-model="repairPaymentStatus">
                                <option value="" disabled>请选择</option>
                                <option value="-1">驳回</option>
                                <option value="0">未处理</option>
                                <option value="1">已付款</option>
                            </select>
                            <label for="repairPaymentStatus">打款状态</label>
                        </div>
                        <div class="col s3 input-field">
                            <input type="text" ng-model="repairCreatedOnStart" id="repairCreatedOnStart"  class="datepicker" autocomplete="off"   date>
                            <i class="mdi dataIcon mdi-table-large"></i>
                            <label for="repairCreatedOnStart">创建范围(始)</label>
                        </div>
                        <div class="col s3 input-field">
                            <input type="text" ng-model="repairCreatedOnEnd" id="repairCreatedOnEnd" class="datepicker" autocomplete="off"   date>
                            <i class="mdi dataIcon mdi-table-large"></i>
                            <label for="repairCreatedOnEnd">创建范围(终)</label>
                        </div>
                        <div class="col s3 input-field">
                            <input type="text" ng-model="repairStartDate" id="repairStartDate" class="datepicker" autocomplete="off"    date>
                            <i class="mdi dataIcon mdi-table-large"></i>
                            <label for="repairStartDate">发放时间(始)</label>
                        </div>
                        <div class="col s3 input-field">
                            <input type="text" ng-model="repairEndDate" id="repairEndDate" class="datepicker" autocomplete="off"   date>
                            <i class="mdi dataIcon mdi-table-large"></i>
                            <label for="repairEndDate">发放时间(终)</label>
                        </div>
                    </div>
                </div>
                &lt;!&ndash;查询&ndash;&gt;
                <div class="col s2 center" style="margin-top: 35px;">
                    <div class="col s6 center-align">
                        <a class="btn-floating btn-large waves-light waves-effect red lighten-2  btn vc-center"
                           style="margin-right: 10px" ng-click="searchRepairList()">
                            <i class="mdi mdi-magnify"></i>
                        </a>
                    </div>
                    <div class="col s6 center-align">
                        <a class="btn-floating btn-large waves-light waves-effect btn vc-center" style="background-color: #fea353;" ng-click="exportRepair()">
                            <i class="mdi mdi-cloud-download"></i>
                        </a>
                    </div>
                </div>

                &lt;!&ndash;查询列表页&ndash;&gt;
                <div class="row tableBox">
                    <div class="col s12">
                        <div class="col s12 cyan white-text vc-center fz18" style="height: 60px;border-bottom: 1px solid  #4e84cb;border-top:1px solid  #fff" ng-if="repairList.length!==0">

                            <div class="col s4 left-align bold">
                                总维修金额:{{boxArrayReair.repair_money}}元
                            </div>
                            <div class="col s4 center-align bold">
                                总配件金额:{{boxArrayReair.parts_money}}元
                            </div>
                            <div class="col s4 right-align bold">
                                总保养金额:{{boxArrayReair.maintain_money}}元
                            </div>

                        </div>
                        <div class="col s12 cyan white-text vc-center fz18" style="height: 60px;border-bottom: 1px solid  #4e84cb;border-top:1px solid  #fff" ng-if="initialRepair.selectedIdsArr.length!==0">
                            <div class="col s4 left-align bold">
                                总维修金额:{{initialRepair.checkedRepair}}元
                            </div>
                            <div class="col s4 center-align bold">
                                总配件金额:{{initialRepair.checkedParts}}元
                            </div>
                            <div class="col s4 right-align bold">
                                总保养金额:{{initialRepair.checkedMain}}元
                            </div>
                        </div>
                        <div class="divider cyan" style="height: 2px;"></div>
                        <table class=" bordered striped text_mid">
                            <thead class="blue-grey lighten-5">
                            <tr class="grey-text text-darken-2">
                                <th ng-show="repairList[0].payment_status==0" >
                                    <input type="checkbox" ng-click="selectAllCheckBoxReair($event)" id="selectAllReair" name="selectAllReair" class="filled-in" />
                                    <label for="selectAllReair" class="black-text">全选</label>
                                </th>
                                <th>维修ID</th>
                                <th>车牌号</th>
                                <th>司机</th>
                                <th>维修金额</th>
                                <th>配件金额</th>
                                <th>保养金额</th>
                                <th>状态</th>
                                <th>创建时间</th>
                                <th>发放时间</th>
                                <th>银行账号</th>
                                <th>户名</th>
                                <th>开户行</th>
                                <th>描述</th>
                                <th ng-show="repairList[0].payment_status==0">
                                    <button ng-click="batchDealReair()" class="btn waves-light waves-effect lighten-1 fz15 padding square-bth" type="button">
                                        批量
                                    </button>
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="el in repairList" class="grey-text text-darken-1">
                                <td ng-show="el.payment_status==0">
                                     <span class="switch"  >
                                          <input ng-click="checkIsAllSelReair();checkSelMissionReair($event,el,$index)" type="checkbox" id="{{el.id}}" name="select" class="filled-in"/>
                                          <label for="{{el.id}}" class="mp-10"></label>
                                    </span>
                                </td>
                                <td>{{el.id}}</td>
                                <td>{{el.truck_num}}</td>
                                <td>{{el.drive_name}}</td>
                                <td class="red-text" >{{el.repair_money}}</td>
                                <td class="red-text" >{{el.parts_money}}</td>
                                <td class="red-text" >{{el.maintain_money}}</td>
                                <td>{{el.payment_status==0?'未处理':el.payment_status==1?'已付款':'驳回'}}</td>
                                <td>{{el.created_on | date:'yyyy-MM-dd'}}</td>
                                <td>{{el.repair_date | date:'yyyy-MM-dd'}}</td>
                                <td>{{el.bank_number}}</td>
                                <td>{{el.bank_name}}</td>
                                <td>{{el.bank_user_name}}</td>
                                <td>{{el.remark}}</td>
                                <td class="details"  ng-show="el.payment_status == 0">
                                    <a ng-click="getRejectReair(el.id)">
                                        <i class="mdi mdi-window-close look_icon red-text lighten-1"></i>
                                    </a>
                                    <a ng-click="getPastReair(el.id)">
                                        <i class="mdi  mdi-check look_icon cyan-text lighten-1"></i>
                                    </a>

                                    &lt;!&ndash; <a ng-click="getReairDetail(el.id)">
                                         <i class="mdi mdi-file-document look_icon cyan-text lighten-1"></i>
                                     </a>&ndash;&gt;
                                </td>
                            </tr>
                            <tr ng-if="repairList.length==0">
                                <td colspan="13">暂无数据</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                &lt;!&ndash;分页&ndash;&gt;
                <div class="row tableBox">
                    <div class="col s12" style="height: 45px">
                        <div class="right">
                            <a class="waves-light waves-effect cyan lighten-1 btn" id="repairPre" ng-click="repairPreviousPage()">
                                上一页
                            </a>
                            <a class="waves-light waves-effect cyan lighten-1 btn" id="repairNext" ng-click="repairNextPage()">
                                下一页
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div id="cash_etc" class="col s12 tab_box">
                <div class="col s10" style="margin-bottom: 20px">

                    <div class="col s12">
                        &lt;!&ndash; <div class="col s3 input-field">
                             <input id="etcNumber" ng-model="etcNumber" type="text">
                             <label for="etcNumber">编号</label>
                         </div>&ndash;&gt;
                        <div class="col s3 input-field">
                            <select material-select watch ng-model="etcDriver" id="etcDriver" style="width: 100%" >
                                <option value="" selected>请选择</option>
                                <option ng-repeat="drive in driveList" ng-value='drive.id'>{{drive.drive_name}}</option>
                            </select>
                        </div>
                        <div class="col s3 input-field">
                            <select  material-select watch ng-model="etcTruck" id="etcTruck"  style="width: 100%">
                                <option value="" selected>请选择</option>
                                <option ng-repeat="truck in truckList" ng-value="truck.id">{{truck.truck_num}}</option>
                            </select>
                        </div>
                        <div class="col s6 input-field">
                            <select material-select watch id="etcPaymentStatus" ng-model="etcPaymentStatus">
                                <option value="" disabled>请选择</option>
                                <option value="-1">驳回</option>
                                <option value="0">未处理</option>
                                <option value="1">已付款</option>
                            </select>
                            <label for="etcPaymentStatus">打款状态</label>
                        </div>
                        <div class="col s3 input-field">
                            <input type="text" ng-model="etcCreatedOnStart" id="etcCreatedOnStart"  class="datepicker" autocomplete="off"   date>
                            <i class="mdi dataIcon mdi-table-large"></i>
                            <label for="etcCreatedOnStart">创建范围(始)</label>
                        </div>
                        <div class="col s3 input-field">
                            <input type="text" ng-model="etcCreatedOnEnd" id="etcCreatedOnEnd" class="datepicker" autocomplete="off"   date>
                            <i class="mdi dataIcon mdi-table-large"></i>
                            <label for="etcCreatedOnEnd">创建范围(终)</label>
                        </div>
                        <div class="col s3 input-field">
                            <input type="text" ng-model="etcStartDate" id="etcStartDate" class="datepicker" autocomplete="off"    date>
                            <i class="mdi dataIcon mdi-table-large"></i>
                            <label for="etcStartDate">发放时间(始)</label>
                        </div>
                        <div class="col s3 input-field">
                            <input type="text" ng-model="etcEndDate" id="etcEndDate" class="datepicker" autocomplete="off"   date>
                            <i class="mdi dataIcon mdi-table-large"></i>
                            <label for="etcEndDate">发放时间(终)</label>
                        </div>
                    </div>
                </div>
                &lt;!&ndash;查询&ndash;&gt;
                <div class="col s2 center" style="margin-top: 35px;">
                    <div class="col s6 center-align">
                        <a class="btn-floating btn-large waves-light waves-effect red lighten-2  btn vc-center"
                           style="margin-right: 10px" ng-click="searchETCList()">
                            <i class="mdi mdi-magnify"></i>
                        </a>

                    </div>
                    <div class="col s6 center-align">
                        <a class="btn-floating btn-large waves-light waves-effect btn vc-center" style="background-color: #fea353;" ng-click="exportEtc()">
                            <i class="mdi mdi-cloud-download"></i>
                        </a>
                    </div>
                </div>

                &lt;!&ndash;查询列表页&ndash;&gt;
                <div class="row tableBox">
                    <div class="col s12">
                        <div class="col s12 cyan white-text vc-center fz18" style="height: 60px;border-bottom: 1px solid  #4e84cb;border-top:1px solid  #fff" ng-if="etcList.length!==0">
                            <div class="col s12 left-align bold">
                                总过路费:{{boxArrayEtc}}元
                            </div>
                        </div>
                        <div class="col s12 cyan white-text vc-center fz18" style="height: 60px;border-bottom: 1px solid  #4e84cb;border-top:1px solid  #fff" ng-if="initialEtc.selectedIdsArr.length!==0">
                            <div class="col s12 left-align bold">
                                批量过路费:{{initialEtc.checkedEtc}}元
                            </div>
                        </div>
                        <div class="divider cyan" style="height: 2px;"></div>
                        <table class=" bordered striped text_mid">
                            <thead class="blue-grey lighten-5">
                            <tr class="grey-text text-darken-2">
                                <th ng-show="etcList[0].payment_status==0" >
                                    <input type="checkbox" ng-click="selectAllCheckBoxEtc($event)" id="selectAllEtc" name="selectAllEtc" class="filled-in" />
                                    <label for="selectAllEtc" class="black-text">全选</label>
                                </th>
                                <th>司机</th>
                                <th>货车牌号</th>
                                <th>过路费</th>
                                <th>状态</th>
                                <th>创建时间</th>
                                <th>发放时间</th>
                                <th>银行账号</th>
                                <th>户名</th>
                                <th>开户行</th>
                                <th>描述</th>
                                <th ng-show="etcList[0].payment_status==0">
                                    <button ng-click="batchDealEtc()" class="btn waves-light waves-effect lighten-1 fz15 padding square-bth" type="button">
                                        批量
                                    </button>
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="etc in etcList" class="grey-text text-darken-1">
                                <td ng-show="etc.payment_status==0">
                                     <span class="switch"  >
                                          <input ng-click="checkIsAllSelEtc();checkSelMissionEtc($event,etc,$index)" type="checkbox" id="{{etc.id}}" name="select" class="filled-in"/>
                                          <label for="{{etc.id}}" class="mp-10"></label>
                                    </span>
                                </td>
                                <td>{{etc.drive_name}}</td>
                                <td>{{etc.truck_num}}</td>
                                <td class="red-text" >{{etc.etc_fee}}</td>
                                <td>{{etc.payment_status==0?'未处理':etc.payment_status==1?'已付款':'驳回'}}</td>
                                <td>{{etc.created_on | date:'yyyy-MM-dd'}}</td>
                                <td>{{etc.etc_date |date:'yyyy-MM-dd'}}</td>
                                <td>{{etc.bank_number}}</td>
                                <td>{{etc.bank_name}}</td>
                                <td>{{etc.bank_user_name}}</td>
                                <td>{{etc.remark}}</td>
                                <td class="details"  ng-show="etc.payment_status == 0">
                                    <a ng-click="getRejectEtc(etc.id)">
                                        <i class="mdi mdi-window-close look_icon red-text lighten-1"></i>
                                    </a>
                                    <a ng-click="getPastEtc(etc.id)">
                                        <i class="mdi  mdi-check look_icon cyan-text lighten-1"></i>
                                    </a>

                                    &lt;!&ndash; <a ng-click="getEtcDetail(etc.id)">
                                         <i class="mdi mdi-file-document look_icon cyan-text lighten-1"></i>
                                     </a>&ndash;&gt;
                                </td>
                            </tr>
                            <tr ng-if="etcList.length==0">
                                <td colspan="11">暂无数据</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                &lt;!&ndash;分页&ndash;&gt;
                <div class="row tableBox">
                    <div class="col s12" style="height: 45px">
                        <div class="right">
                            <a class="waves-light waves-effect cyan lighten-1 btn" id="etcPre" ng-click="etcPreviousPage()">
                                上一页
                            </a>
                            <a class="waves-light waves-effect cyan lighten-1 btn" id="etcNext" ng-click="etcNextPage()">
                                下一页
                            </a>
                        </div>
                    </div>
                </div>
            </div>-->
        </div>
    </div>
</div>