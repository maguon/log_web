
<!-- 主菜单：车辆管理 -> 车辆信息 画面 -->
<div id="truck_details">


        <div class="modal-content grey-text text-darken-2">

            <!--头车   挂车  跳转-->
            <div class="row no-marBottom" ul-tabs style="overflow: hidden">

                <!--头部 跳转页-->
                <div class="col s12">
                    <ul class="tabWrap grey lighten-4">
                        <li class="tab col s6 headerCar vc-center" ng-click="getHeadCar()">头车</li>
                        <li class="tab col s6 handCar vc-center" ng-click="getHandCar()">挂车</li>
                    </ul>
                </div>


                <!--显示  头车  页面-->
                <div id="headerCar" class="row tab_box mp-50">

                    <!-- 上部分：检索条件输入区域 -->


                    <!--渲染条件-->
                    <div class="row col s12">

                            <!--查询条件-->
                            <div class="col s10">

                                <!--行1-->
                                <div class="col s12">
                                    <!--所属类型-->
                                    <div class="input-field col colWidth">
                                        <select  material-select watch id="headOperateType"  ng-model="conHeadOperateType" ng-change="changeOperateType(conHeadOperateType)">
                                            <option value="">请选择</option>
                                            <option ng-repeat="operate in operateTypeList" ng-value="operate.id">{{operate.operate_type}}</option>
                                        </select>
                                        <label for="headOperateType">所属类型</label>
                                    </div>

                                    <!--所属公司-->
                                    <div class="input-field col colWidth">
                                        <select id="headCompany" material-select watch ng-model="conHeadCompany">
                                            <option value="">所属公司</option>
                                            <option ng-repeat="el in companyList" ng-value="el.id">{{el.company_name}}</option>
                                        </select>
                                        <label for="headCompany">请选择</label>
                                    </div>

                                    <!--品牌-->
                                    <div class="input-field col colWidth">
                                        <select id="headBrand" material-select watch ng-model="conHeadBrand">
                                            <option value="">请选择</option>
                                            <option ng-repeat="el in brandList" ng-value="el.id">{{el.brand_name}}</option>
                                        </select>
                                        <label for="headBrand">品牌</label>
                                    </div>
                                    <!--型号-->
                                    <div class="input-field col colWidth">
                                        <select id="truck_style" name="truck_style" material-select watch ng-model="conHeadStyle">
                                            <option value="">请选择</option>
                                            <option ng-repeat="el in brandStyle" ng-value="el.id">{{el.brand_style_name}}</option>
                                        </select>
                                        <label for="truck_style">品牌型号</label>
                                    </div>
                                    <!--货车牌号-->
                                    <div class="input-field col colWidth">
                                        <select id="headTruck" ng-model="conHeadTruck" style="width: 100%" >
                                            <option value=""></option>
                                            <option ng-repeat="el in headTruckList" >{{el.truck_num}}</option>
                                        </select>
                                    </div>
                                </div>

                                <!--行2-->
                                <div class="col s12">
                                    <!--关联司机-->
                                    <div class="input-field col colWidth">
                                        <input id="headDriver" type="text" ng-model="conHeadDriver">
                                        <label for="headDriver">关联司机</label>
                                    </div>

                                    <!--营运证检证日期(始)-->
                                    <div class="input-field col colWidth">
                                        <input type="text" ng-model="conHeadOperationStartTime" id="headOperationStartTime"  class="datepicker" autocomplete="off" date>
                                        <i class="mdi dataIcon mdi-table-large"></i>
                                        <label for="headOperationStartTime">营运证检证日期(始)</label>
                                    </div>

                                    <!--营运证检证日期(终)-->
                                    <div class="input-field col colWidth">
                                        <input type="text" ng-model="conHeadOperationEndTime" id="headOperationEndTime"  class="datepicker" autocomplete="off" date>
                                        <i class="mdi dataIcon mdi-table-large"></i>
                                        <label for="headOperationEndTime">营运证检证日期(终)</label>
                                    </div>

                                    <!--行驶证检证日期(始)-->
                                    <div class="input-field col colWidth">
                                        <input type="text" ng-model="conHeadCarStartTime" id="headCarStartTime" class="datepicker" autocomplete="off" date>
                                        <i class="mdi dataIcon mdi-table-large"></i>
                                        <label for="headCarStartTime">行驶证检证日期(始)</label>
                                    </div>

                                    <!--行驶证检证日期(终)-->
                                    <div class="input-field col colWidth">
                                        <input type="text" ng-model="conHeadCarEndTime" id="headCarEndTime"   class="datepicker" autocomplete="off" date>
                                        <i class="mdi dataIcon mdi-table-large"></i>
                                        <label for="headCarEndTime">行驶证检证日期(终)</label>
                                    </div>
                                </div>
                            </div>



                            <!--按钮区域-->
                            <div class="col s2 mp-40">


                                <!--查询按钮-->
                                <div class="col s4 center">
                                    <a class=" btn-floating btn-large waves-light waves-effect red lighten-2  btn vc-center"  ng-click="getHeadCarList()">
                                        <i class="mdi mdi-magnify"></i>
                                    </a>
                                </div>


                                <!--下载按钮-->
                                <div class="col s4 center">
                                    <a class="btn-floating btn-large waves-light waves-effect btn vc-center" style="background-color: #fea353;" ng-click="headExport()">
                                        <i class="mdi mdi-cloud-download"></i>
                                    </a>
                                </div>


                                <!--添加按钮-->
                                <div class="col s4 center">
                                    <a class="btn-floating btn-large waves-light waves-effect cyan lighten-1 btn vc-center"  ui-sref="add_head_truck_details({from:'truck_details'})">
                                        <i class="mdi mdi-plus"></i>
                                    </a>
                                </div>
                            </div>

                    </div>



                    <!-- 下部分：检索结果显示区域 -->
                    <div class="row">

                        <!--分割线-->
                        <div class="divider cyan" style="height: 2px;width: 100%"></div>

                        <!--列表-->
                        <table class="bordered striped text_mid">
                            <thead class="blue-grey lighten-5">

                                <!--表头-->
                                <tr class="grey-text text-darken-2">
                                    <th>车牌号</th>
                                    <th>品牌</th>
                                    <th>挂车号</th>
                                    <th>主驾</th>
                                    <th>车辆电话</th>
                                    <th>所属类型</th>
                                    <th>所属单位</th>
                                    <th>产值公司</th>
                                    <th>车辆状态</th>
                                    <th>车检</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!--表体-->
                                <tr ng-repeat="el in headCarList" class="grey-text text-darken-1">
                                    <td>{{el.truck_num}}</td>
                                    <td>{{el.brand_name}}</td>
                                    <td>{{el.trail_num|null_filter}}</td>
                                    <td>{{el.drive_name|null_filter}}</td>
                                    <td>{{el.truck_tel}}</td>
                                    <td>{{el.operate_type | carType}}</td>
                                    <td>{{el.company_name}}</td>
                                    <td>{{el.output_company_name}}</td>
                                    <td>{{el.truck_status | workStatus}}</td>
                                    <td class="white-text">
                                        <span ng-show="el.driving_date|ptime" class="small-tips red lighten-2">临</span>
                                        <span ng-hide="el.driving_date|ptime" class="small-tips "></span>
                                    </td>
                                    <td class="operation vc-center">
                                        <!--保单信息详情-->
                                        <a href="#" ui-sref="truck_guarantee_details({id:el.id,type:1,from:'truck_details'})" class="small-tips cyan lighten-2 white-text" style="width: 31px;display: inline-block">保</a>

                                        <!--维修详情-->
                                        <a href="#" ui-sref="truck_repair({id:el.id,type:1,status:1,from:'truck_details'})" ng-if="el.repair_status==1"  class="cyan-text fz12 center-align" style="margin-right: 10px;cursor: pointer;display: inline-block">
                                            <i class="mdi mdi-wrench"></i>
                                        </a>

                                        <a href="#" ui-sref="truck_repair({id:el.id,type:1,status:0,from:'truck_details'})" ng-if="el.repair_status==0" class="red-text fz12" style="margin-right: 10px;cursor: pointer;display: inline-block">
                                            <i class="mdi mdi-wrench"></i>
                                        </a>

                                        <!--车辆详情-->
                                        <a href="#" ui-sref="look_head_truck_details({id:el.id,from:'truck_details'})">
                                            <i class="mdi mdi-file-outline look_icon cyan-text lighten-1" ></i>
                                        </a>

                                        <!--定位-->
                                        <a href="" ng-click="showCarPositionModel(el.id)" class="cyan-text fz12" style="cursor: pointer;display: inline-block">
                                            <i class="mdi mdi-map-marker"></i>
                                        </a>

                                        <!--车辆状态-->
                                        <span class="switch" ng-click="changeTruck_status(el.id,el.truck_status)" style="height: 30px;display: inline-block">

                                            <label>
                                                  <input type="checkbox" ng-checked="el.truck_status==1">
                                                  <span class="lever"></span>
                                            </label>
                                        </span>
                                    </td>
                                </tr>
                                <tr ng-if="headCarList.length==0">
                                    <td colspan="11">暂无数据</td>
                                </tr>
                            </tbody>
                        </table>

                    </div>




                    <!-- 上下页按钮 -->
                    <div class="row">
                        <div class="paging_box col s12">
                            <div class="right">
                                <a class="waves-light waves-effect cyan lighten-1 btn"   id="headPre"   ng-click="headPreBtn()">
                                    上一页
                                </a>
                                <a class="waves-light waves-effect cyan lighten-1 btn"   id="headNext"  ng-click="headNextBtn()">
                                    下一页
                                </a>
                            </div>
                        </div>
                    </div>



                </div>



                <!--显示  挂车  页面-->
                <div id="handCar" class="col s12 tab_box" >

                    <!--检索条件-->
                    <div class="row col s12">
                        <div class="col s10 mp-20">
                            <div class="col s12">
                                <!--所属类型-->
                                <div class="input-field col colWidth">
                                    <select  material-select watch id="handOperateType"  ng-model="conHandOperateType" ng-change="changeOperateType(conHandOperateType)">
                                        <option value="">请选择</option>
                                        <option ng-repeat="operate in operateTypeList" ng-value="operate.id">{{operate.operate_type}}</option>
                                    </select>
                                    <label for="handOperateType">所属类型</label>
                                </div>

                                <!--所属公司-->
                                <div class="input-field col colWidth">
                                    <select id="handCompany" material-select watch ng-model="conHandCompany">
                                        <option value="">所属公司</option>
                                        <option ng-repeat="el in companyList" ng-value="el.id">{{el.company_name}}</option>
                                    </select>
                                    <label for="handCompany">请选择</label>
                                </div>

                                <!--品牌-->
                                <div class="input-field col colWidth">
                                    <select id="handBrand" material-select watch ng-model="conHandBrand">
                                        <option value="">请选择</option>
                                        <option ng-repeat="el in brandList" ng-value="el.id">{{el.brand_name}}</option>
                                    </select>
                                    <label for="handBrand">品牌</label>
                                </div>
                                <!-- 型号-->
                                <div class="input-field col colWidth">
                                    <select id="hand_truck_style" name="truck_style" material-select watch ng-model="conHandStyle">
                                        <option value="">请选择</option>
                                        <option ng-repeat="el in brandStyle" ng-value="el.id">{{el.brand_style_name}}</option>
                                    </select>
                                    <label for="truck_style">品牌型号</label>
                                </div>

                                <!--货车牌号-->
                                <div class="input-field col colWidth">
                                    <select id="handTruck" style="width: 100%" ng-model="conHandTruck">
                                        <option value=""></option>
                                        <option ng-repeat="el in truckTrailerNumList" >{{el.truck_num}}</option>
                                    </select>
                                </div>

                            </div>
                            <div class="col s12">

                                <!--挂车货位(始)-->
                                <div class="input-field col s2">
                                    <input id="handNumStart" type="number" ng-model="conHandNumStart">
                                    <label for="handNumStart">挂车货位(始)</label>
                                </div>

                                <!--挂车货位(终)-->
                                <div class="input-field col s2">
                                    <input id="handNumEnd" type="number" ng-model="conHandNumEnd">
                                    <label for="handNumEnd">挂车货位(终)</label>
                                </div>

                                <!--营运证检证日期(始)-->
                                <div class="input-field col s2">
                                    <input type="text" ng-model="conOperationHandStartTime" id="operationHandStartTime"  class="datepicker" autocomplete="off" date>
                                    <i class="mdi dataIcon mdi-table-large"></i>
                                    <label for="operationHandStartTime">营运证检证日期(始)</label>
                                </div>

                                <!--营运证检证日期(终)-->
                                <div class="input-field col s2">
                                    <input type="text" ng-model="conOperationHandEndTime" id="operationHandEndTime" class="datepicker" autocomplete="off" date>
                                    <i class="mdi dataIcon mdi-table-large"></i>
                                    <label for="operationHandEndTime">营运证检证日期(终)</label>
                                </div>

                                <!--行驶证检证日期(始)-->
                                <div class="input-field col s2">
                                    <input type="text" ng-model="conCarHandStartTime" id="carHandStartTime" class="datepicker" autocomplete="off" date>
                                    <i class="mdi dataIcon mdi-table-large"></i>
                                    <label for="carHandStartTime">行驶证检证日期(始)</label>
                                </div>

                                <!--行驶证检证日期(终)-->
                                <div class="input-field col s2">
                                    <input type="text" ng-model="conCarHandEndTime" id="carHandEndTime" class="datepicker" autocomplete="off" date>
                                    <i class="mdi dataIcon mdi-table-large"></i>
                                    <label for="carHandEndTime">行驶证检证日期(终)</label>
                                </div>

                            </div>

                        </div>

                        <!-- 按钮 -->
                        <div class="col s2 mp-70">

                            <!--查询按钮-->
                            <div class="col s4 center">
                                <a class="btn-floating btn-large waves-light waves-effect red lighten-2  btn vc-center"   ng-click="getHandCarList()">
                                    <i class="mdi mdi-magnify"></i>
                                </a>
                            </div>

                            <!--下载按钮-->
                            <div class="col s4 center">
                                <a class="btn-floating btn-large waves-light waves-effect btn vc-center" style="background-color: #fea353;" ng-click="handExport()">
                                    <i class="mdi mdi-cloud-download"></i>
                                </a>
                            </div>

                            <!--添加按钮-->
                            <div class="col s4 center">
                                <a class=" btn-floating btn-large waves-light waves-effect cyan lighten-1 btn vc-center" ui-sref="add_hand_truck_details({from:'truck_details'})">
                                    <i class="mdi mdi-plus"></i>
                                </a>
                            </div>
                        </div>


                    </div>



                    <!-- 下部分：检索结果显示区域 -->
                    <div class="row" >

                        <!--分割线-->
                        <div class="divider cyan" style="height: 2px;width: 100%"></div>

                        <!--列表-->
                        <table class="bordered striped text_mid">
                            <thead class="blue-grey lighten-5">
                            <tr class="grey-text text-darken-2">
                                <th>车牌号</th>
                                <th>挂车货位</th>
                                <th>关联车头</th>
                                <th>所属类型</th>
                                <th>所属单位</th>
                                <th>产值公司</th>
                                <th>车辆状态</th>
                                <th>车检</th>
                                <th>操作</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="el in handCarList" class="grey-text text-darken-1">
                                <td>{{el.truck_num}}</td>
                                <td>{{el.number}}</td>
                                <td>{{el.first_num}}</td>
                                <td>{{el.operate_type | carType}}</td>
                                <td>{{el.company_name}}</td>
                                <td>{{el.output_company_name}}</td>
                                <td ng-if="el.truck_status==1">正常</td>
                                <td ng-if="el.truck_status==0">维修</td>
                                <td class="white-text">
                                    <span ng-show="el.driving_date|ptime" class="small-tips red lighten-2">临</span>
                                    <span ng-hide="el.driving_date|ptime" class="small-tips "></span>
                                </td>

                                <!--操作-->
                                <td class="operation">

                                    <!--保单详情-->
                                    <a href="#" ui-sref="truck_guarantee_details({id:el.id,type:2,from:'truck_details'})" class="small-tips cyan lighten-2 white-text" style="margin-right: 10px;cursor: pointer">保</a>

                                    <!--维修详情-->
                                    <a href="#" ui-sref="truck_repair({id:el.id,type:2,status:1,from:'truck_details'})" ng-if="el.repair_status==1" class="normal-tips cyan-text   fz12" style="margin-right: 10px;cursor: pointer">
                                        <i class="mdi mdi-wrench"></i>
                                    </a>
                                    <a href="#" ui-sref="truck_repair({id:el.id,type:2,status:0,from:'truck_details'})" ng-if="el.repair_status==0" class="normal-tips red-text   fz12" style="margin-right: 10px;cursor: pointer">
                                        <i class="mdi mdi-wrench"></i>
                                    </a>

                                    <!--车辆详情-->
                                    <a href="#" ui-sref="look_hand_truck_details({id:el.id,from:'truck_details'})">
                                        <i class="mdi mdi-file-outline look_icon cyan-text lighten-1  " ></i>
                                    </a>

                                    <!--使用状态-->
                                    <span class="switch" ng-click="changeTruckTrailer_status(el.id,el.truck_status)" style="height: 30px">
                                        <label>
                                          <input type="checkbox" ng-checked="el.truck_status==1">
                                          <span class="lever"></span>
                                        </label>
                                    </span>
                                </td>
                            </tr>
                            <tr ng-if="handCarList.length==0">
                                <td colspan="9">暂无数据</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>


                    <!-- 上下页按钮 -->
                    <div class="row">
                        <div class="paging_box col s12">
                            <div class="right">
                                <a class="waves-light waves-effect cyan lighten-1 btn"  id="handPre"   ng-click="handPreBtn()">
                                    上一页
                                </a>
                                <a class="waves-light waves-effect cyan lighten-1 btn"  id="handNext"  ng-click="handNextBtn()">
                                    下一页
                                </a>
                            </div>
                        </div>
                    </div>


                </div>
            </div>

        </div>

</div>






<!--设置车辆当前位置模态框-->
<div id="carPositionModel" class="row modal modal-fixed-footer" style="width: 60%">

    <!--   Header 题目  设置车辆当前位置-->
    <div class="cyan lighten-1 white-text center-align modal_title" >设置车辆当前位置</div>

    <div class="modal-content">

        <div class="row col s12">

            <div class="input-field col s4 offset-s4">

                <select class="js-example-basic-single"  style="width:100%" ng-model="currentCityId">
                    <option value=""></option>
                    <option ng-repeat="city in allCityList" ng-value="city.id">{{city.city_name}}</option>
                </select>

            </div>

        </div>
    </div>



    <div class="modal-footer valign-wrapper">
        <div class="col s12">
            <div class="col s2 offset-s4">
                <a class="modal-action modal-close waves-light waves-effect grey lighten-1 btn">
                    取消
                </a>
            </div>
            <div class="col s2">
                <a ng-click="savePositionInfo()" class="waves-light waves-effect cyan lighten-1 btn">
                    确定
                </a>
            </div>
        </div>
    </div>


</div>